<!DOCTYPE html>
<html>
    <head>
        <script>
            class ManageProduct{
                saveproduct = () =>{
                    let pname = document.getElementById("pname").value;
                    let cost = document.getElementById("cost").value;
                    let quantity = document.getElementById("quantity").value;

                    let newproduct = {pname:pname, cost:cost, quantity:quantity};

                    const queryParams = new URLSearchParams(window.location.search);
                    const id = queryParams.get('id');
                    let url = "http://localhost:1234/productlist/"+id;

                    let postData = {
                        headers:{'Content-Type':'application/json'},
                        method:'put',
                        body:JSON.stringify(newproduct)
                    }

                    fetch(url, postData)
                    .then(response=>response.json())
                    .then(productinfo=>{
                        alert("Product Updated Successfully !");
                        window.location.href="class2.html";
                    })
                }

                getproductinfo = () =>{
                    const queryParams = new URLSearchParams(window.location.search);
                    const id = queryParams.get('id');
                    let url = "http://localhost:1234/productlist/"+id;
                    fetch(url)
                    .then(response=>response.json())
                    .then(userinfo=>{
                        document.getElementById("pname").value = userinfo.pname;
                        document.getElementById("cost").value = userinfo.cost;
                        document.getElementById("quantity").value = userinfo.quantity;
                    })
                }
            }
            const obj3 = new ManageProduct();
        </script>
    </head>
    <body onload="obj3.getproductinfo()">
        <table align="center" cellpadding="15">
            <caption>
                <h1> Edit Products Details </h1>
            </caption>
            <tr>
                <th> Product Name </th>
                <td> <input type="text" id="pname"/> </td>
            </tr>
            <tr>
                <th> Product Cost </th>
                <td> <input type="number" id="cost"/> </td>
            </tr>
            <tr>
                <th> Product Quantity</th>
                <td> <input type="number" id="quantity"/> </td>
            </tr>
            <tr>
                <th colspan="2">
                    <button onclick="obj3.saveproduct()"> Update Product </button>
                    <hr/>
                    <a href="class2.html"> Back To List </a>
                </th>
            </tr>
        </table>
    </body>
</html>