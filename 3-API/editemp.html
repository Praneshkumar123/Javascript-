<!DOCTYPE html>
<html>
    <head>
        <title> Add Employee </title>
        <script>

            function getuserinfo(){
            const queryParams = new URLSearchParams(window.location.search);
            const id = queryParams.get('id');
            let url ="http://localhost:1234/emplist/"+id;
            fetch(url)
            .then(response=>response.json())
            .then(empinfo=>{
                 document.getElementById("fullname").value = empinfo.empname;
                 document.getElementById("mobile").value = empinfo.mobile;
                 document.getElementById("salary").value = empinfo.salary;
                 document.getElementById("city").value = empinfo.city;
            })
        }
            const save=()=>{
                let fullname = document.getElementById("fullname").value;
                let mobile = document.getElementById("mobile").value;
                let salary = document.getElementById("salary").value;
                let city = document.getElementById("city").value;
                            let newemp= {
                    "empname":fullname,
                    "mobile":mobile,
                    "salary":salary,
                    "city":city   
                }
                const queryParams = new URLSearchParams(window.location.search);
                const id = queryParams.get('id');
                let url ="http://localhost:1234/emplist/"+id;
                let postData = {
                    headers:{'Content-Type': 'application/json'},
                    method:"PUT",
                    body:JSON.stringify(newemp) // array to json
                }
                fetch(url,postData)
                .then(response=>response.json())
                .then(empinfo=>{
                    alert(empinfo.empname+ "Updated Successfully !")
                })
            }
        </script>
    </head>
    <body onload="getuserinfo()">
        <table align="center" cellpadding="15">
            <caption><h1> Edit Employee Details</h1></caption>
            <tr>
                <th>Employee Name</th>
                 <td> <input type="text" id="fullname"/> </td>   
            </tr>

            <tr>
                <th>Employee Mobile No </th>
                 <td> <input type="number" id="mobile"/> </td>   
            </tr>

            <tr>
                <th>Employee salary </th>
                 <td> <input type="number" id="salary"/> </td>   
            </tr>

            <tr>
                <th>Employee City </th>
                 <td> <select id="city">
                    <option>Choose</option>
                    <option>Bangalore</option>
                    <option>Coimbatore</option>
                    <option>Mumbai</option>
                    <option>Pune</option>
                    <option>Lucknow</option>
                 </select> </td>   
            </tr>

            <tr>
                <th colspan="2">
                    <button onclick="save()">Update</button> 
                    <hr/>
                    <a href="api1.html">Back To List </a>
                </th>
            </tr>
        </table>
    </body>
</html>